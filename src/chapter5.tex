% ============================================================
% Chương 5: Mô phỏng và kết quả
% ============================================================

\newpage
\section{MÔ PHỎNG VÀ KẾT QUẢ}

% ------------------------------------------------------------
\subsection{Thiết lập mô phỏng}
% ------------------------------------------------------------

\subsubsection{Công cụ mô phỏng}

Mô phỏng được thực hiện bằng ngôn ngữ Python với các thư viện:
\begin{itemize}
    \item \texttt{numpy}: Tính toán số học
    \item \texttt{scipy}: Giải phương trình vi phân, tối ưu hóa
    \item \texttt{matplotlib}: Vẽ đồ thị
    \item \texttt{control}: Phân tích hệ thống điều khiển
\end{itemize}

\subsubsection{Thông số mô phỏng}

Các thông số hệ thống được sử dụng trong mô phỏng:

\begin{table}[H]
\centering
\begin{tabular}{|l|c|c|}
\hline
\textbf{Thông số} & \textbf{Giá trị} & \textbf{Đơn vị} \\
\hline
Công suất reboiler tối đa & 6000 & W \\
\hline
Lưu lượng nước làm mát tối đa & 7.2 & L/min \\
\hline
Diện tích trao đổi nhiệt condenser & 0.28 & m$^2$ \\
\hline
Áp suất vận hành & 1.1 & bar \\
\hline
Nồng độ nhập liệu & 15 & \% vol \\
\hline
Lưu lượng nhập liệu & 4.8 & L/h \\
\hline
\end{tabular}
\caption{Thông số hệ thống cho mô phỏng}
\label{tab:simulation_params}
\end{table}

% ------------------------------------------------------------
\subsection{Kết quả mô phỏng}
% ------------------------------------------------------------

\textit{(Phần này sẽ được cập nhật sau khi hoàn thành mô phỏng Python)}

\subsubsection{Mô phỏng vận hành baseline (van mở 100\%)}

% Placeholder cho kết quả mô phỏng baseline
\begin{figure}[H]
\centering
\fbox{\parbox{0.8\textwidth}{\centering\vspace{4cm}Đồ thị mô phỏng công suất reboiler -- baseline\\(Sẽ cập nhật từ kết quả mô phỏng Python)\vspace{4cm}}}
\caption{Mô phỏng công suất reboiler khi van làm mát mở 100\%}
\label{fig:sim_baseline}
\end{figure}

\subsubsection{Mô phỏng với điều khiển áp suất tự động}

% Placeholder cho kết quả mô phỏng tối ưu
\begin{figure}[H]
\centering
\fbox{\parbox{0.8\textwidth}{\centering\vspace{4cm}Đồ thị mô phỏng đáp ứng áp suất với PID\\(Sẽ cập nhật từ kết quả mô phỏng Python)\vspace{4cm}}}
\caption{Mô phỏng đáp ứng áp suất đỉnh tháp với bộ điều khiển PID}
\label{fig:sim_pressure_response}
\end{figure}

\begin{figure}[H]
\centering
\fbox{\parbox{0.8\textwidth}{\centering\vspace{4cm}Đồ thị mô phỏng độ mở van làm mát\\(Sẽ cập nhật từ kết quả mô phỏng Python)\vspace{4cm}}}
\caption{Mô phỏng độ mở van làm mát theo thời gian}
\label{fig:sim_valve_position}
\end{figure}

% ------------------------------------------------------------
\subsection{So sánh hiệu quả năng lượng}
% ------------------------------------------------------------

\textit{(Phần này sẽ được cập nhật sau khi hoàn thành mô phỏng Python)}

% Placeholder cho bảng so sánh
\begin{table}[H]
\centering
\begin{tabular}{|l|c|c|c|}
\hline
\textbf{Thông số} & \textbf{Baseline} & \textbf{Tối ưu} & \textbf{Chênh lệch} \\
\hline
Công suất reboiler trung bình (\%) & --- & --- & --- \\
\hline
Năng lượng reboiler (W) & --- & --- & --- \\
\hline
Độ mở van làm mát (\%) & 100 & --- & --- \\
\hline
Tiêu thụ nước làm mát (L/h) & --- & --- & --- \\
\hline
\end{tabular}
\caption{So sánh hiệu quả năng lượng giữa hai phương án (từ mô phỏng)}
\label{tab:sim_energy_comparison}
\end{table}

\begin{figure}[H]
\centering
\fbox{\parbox{0.8\textwidth}{\centering\vspace{4cm}Đồ thị so sánh công suất reboiler\\(Sẽ cập nhật từ kết quả mô phỏng Python)\vspace{4cm}}}
\caption{So sánh công suất reboiler giữa hai phương án vận hành}
\label{fig:sim_power_comparison}
\end{figure}

% ------------------------------------------------------------
\subsection{Thảo luận}
% ------------------------------------------------------------

\subsubsection{Phân tích kết quả mô phỏng}

\textit{(Phần này sẽ được cập nhật sau khi hoàn thành mô phỏng Python)}

Dự kiến kết quả mô phỏng sẽ cho thấy:
\begin{enumerate}
    \item Phương án điều khiển áp suất đỉnh tháp giúp giảm năng lượng cung cấp cho reboiler.
    \item Độ mở van làm mát trung bình thấp hơn đáng kể so với baseline (100\%).
    \item Chất lượng điều khiển đạt yêu cầu: thời gian xác lập ngắn, độ quá điều chỉnh nhỏ.
    \item Hệ thống ổn định trong các điều kiện vận hành khác nhau.
\end{enumerate}

\subsubsection{Giải thích cơ chế tiết kiệm năng lượng}

Khi van làm mát mở 100\%, công suất ngưng tụ vượt quá nhu cầu thực tế:
\begin{itemize}
    \item Hơi ethanol ngưng tụ nhanh, tạo ``chân không nhẹ'' tại đỉnh tháp.
    \item Áp suất thấp kéo theo tăng lưu lượng hơi từ reboiler.
    \item Reboiler phải hoạt động ở công suất cao hơn để bù đắp.
\end{itemize}

Khi điều khiển áp suất ở mức tối ưu:
\begin{itemize}
    \item Van làm mát chỉ mở vừa đủ để duy trì áp suất ổn định.
    \item Giảm lượng nhiệt bị lấy đi không cần thiết tại condenser.
    \item Reboiler hoạt động ở công suất thấp hơn, tiết kiệm năng lượng.
\end{itemize}

\subsubsection{Hạn chế của mô phỏng}

\begin{itemize}
    \item Mô hình đơn giản hóa, chưa xét đầy đủ các yếu tố phi tuyến.
    \item Chưa xem xét ảnh hưởng của nhiễu loạn (thay đổi nồng độ nhập liệu, nhiệt độ nước làm mát).
    \item Cần kiểm chứng thực nghiệm để xác nhận kết quả mô phỏng.
\end{itemize}
