ĐẠI HỌC QUỐC GIA TP. HỒ CHÍ MINH
TRƯỜNG ĐẠI HỌC BÁCH KHOA



ĐIỀU KHIỂN QUÁ TRÌNH CÔNG NGHỆ HOÁ HỌC

QUYỂN 2

HƯỚNG DẪN THÍ NGHIỆM – THỰC HÀNH
CƠ SỞ ĐIỀU KHIỂN QUÁ TRÌNH

KHOA KỸ THUẬT HÓA HỌC

GIỚI THIỆU
Hệ thống điều khiển tự động có vai trò ngày càng quan trọng trong vận hành nhà máy.
Nếu không có hệ thống điều khiển, sẽ không thể vận hành các nhà máy hiện đại một cách
an toàn và hiệu quả kinh tế trong khi vẫn đáp ứng các yêu cầu về chất lượng sản phẩm
và môi trường. Vì vậy, điều quan trọng đối với kỹ sư hóa học là phải hiểu biết về cả lý
thuyết điều khiển và thực hành trên các quá trình thực tế. Quyển sách này là tài liệu
hướng dẫn phần thí nghiệm - thực hành môn học“Cơ sở điều khiển quá trình”.
Hệ thống các thí nghiệm điều khiển quá trình sẽ được thực hiện trong phòng thí nghiệm.
Việc nghiên cứu các thí nghiệm này sẽ củng cố sự hiểu biết về điều khiển quá trình và
sẽ giúp sinh viên quen thuộc hơn với các thao tác điều khiển quá trình thực tế.
Hệ thống thiết bị thí nghiệm bao gồm:
1) Hệ thống điều chỉnh tự động mức chất lỏng
2) Hệ thống điều chỉnh tự động nhiệt độ
3) Hệ thống điều chỉnh tự động lưu lượng
4) Hệ thống điều chỉnh tự động áp suất
5) Hệ thống điều chỉnh tự động nồng độ
6) Hệ thống điều khiển đa năng kết hợp
Dựa trên các hệ thống này, sinh viên thực hiện các bài thí nghiệm theo các Thí nghiệm:
Bài thí nghiệm 1: Khảo sát các sách lược điều khiển
Bài thí nghiệm 2: Thiết bị điều khiển và lập trình vi điều khiển
Bài thí nghiệm 3: Khảo sát các bộ điều khiển ON-OFF và PID
Bài thí nghiệm 4: Khảo sát ảnh hưởng các thông số bộ điều khiển PID

TP. HCM, ngày 6 tháng 6 năm 2021.
Bùi ngọc pha- P.H.H.P. Lợi

MỤC LỤC
BÀI THÍ NGHIỆM 1 .................................................................................................... 3
ĐIỀU KHIỂN KẾT HỢP PHẢN HỒI VÀ TRUYỀN THẲNG ............................... 6
Thí nghiệm 1: Khảo sát phương thức điều khiển phản hồi ..................................... 12
Thí nghiệm 2: Khảo sát phương thức điều khiển truyền thẳng ............................... 12
Thí nghiệm 3: Khảo sát phương thức điều khiển kết hợp ....................................... 12
BÀI THÍ NGHIỆM 2 .................................................................................................. 14
Thí nghiệm 1: Thực hiện mô phỏng điều khiển động cơ khuấy. ............................ 18
Thí nghiệm 2: Thực hiện mô phỏng điều khiển động cơ khuấy.............................. 20
Thí nghiệm 3: Mô phỏng điều khiển vận hành hệ thống chưng cất ........................ 21
Thí nghiệm 4: Lập trình điều chỉnh tự động nhiệt độ nhập liệu vào tháp chưng cất
sử dụng bộ điều khiển ON-OFF. ............................................................................. 23
Thí nghiệm 5: Lập trình điều chỉnh tự động mức chất lỏng đáy tháp chưng cất sử
dụng bộ điều khiển PID. .......................................................................................... 24
BÀI THÍ NGHIỆM 3 .................................................................................................. 26
Thí nghiệm 1: Khảo sát bộ điều khiển ON/OFF ..................................................... 29
Thí nghiệm 2: Khảo sát các bộ điều khiển P, PI và PID ......................................... 29
BÀI THÍ NGHIỆM 4 .................................................................................................. 31
Thí nghiệm 1: Khảo sát sự ảnh hưởng các thông số bọ điều khiển PID ................. 32
Thí nghiệm 2: Thiết kế bộ điều khiển PID theo Ziegler- Nichols 1 (NZ1)............. 33
Phụ lục 1: HƯỚNG DẪN VIẾT BÁO CÁO THÍ NGHIỆM .............................................. 34

BÀI THÍ NGHIỆM 1
KHẢO SÁT CÁC SÁCH LƯỢC VÀ CHẤT LƯỢNG ĐIỀU KHIỂN

1. MỤC ĐÍCH THÍ NGHIỆM
Tìm hiểu cầu trúc và vận hành hệ thống điều khiển tự động mức chất lỏng trong thực tế.
Khảo sát các phương thức điều khiển truyền thẳng, phản hồi và kết hợp giữa truyền thẳng
và phản hồi. Dựa trên kết quả thu được, đánh giá và so sánh chất lượng điều khiển đối
với mỗi phương thức điều khiển.

2. NỘI DUNG THÍ NGHIỆM
Nội dung chính của việc thí nghiệm điều khiển quá trình là tìm hiểu nguyên lý hoạt động
của hệ thống điều khiển, hiểu được vai trò các thiết bị trong hệ thống như cảm biến, cơ
cấu chấp hành, bộ điều khiển,... Thực hiện khảo sát các phương thức điều khiển khác
nhau, từ đó đánh giá chất lượng điều khiển của mỗi phương thức.

3. CƠ SỞ LÝ THUYẾT
3.1. Các nguyên lý điều khiển
Nguyên lý điều khiển thể hiện nguyên tắc về mặt cấu trúc trong việc sử dụng thông tin
về các biến quá trình để đưa ra tác động điều khiển. Hầu hết các sách lược điều khiển
này đều dựa trên sự kết hợp hoặc mở rộng của các nguyên lý điều khiển cơ bản, đó là
điều khiển theo tác động thiết lập (Hình a); điều khiển theo tác động của nhiễu (Hình b)
và điều khiển theo tác động phản hồi (Hình c).

Các biến
nhiễu z
Giá trị đặt
YSP

BĐK

Tác động
điều khiển u

Các biến cần
điều khiển y

QUÁ TRÌNH

Hình a. Cấu trúc điều khiển theo tác động thiết lập

Các biến
nhiễu z
Giá trị đặt
YSP

BĐK

Tác động
điều khiển u

Các biến cần
điều khiển y

QUÁ TRÌNH

Hình b. Cấu trúc điều khiển theo tác động của nhiễu

Các biến
nhiễu z
Giá trị đặt
YSP

BĐK

Tác động
điều khiển u

QUÁ TRÌNH

Các biến cần
điều khiển y

Hình c. Cấu trúc điều khiển theo tác động phản hồi từ biến cần điều khiển
3.2. Các sách lược điều khiển
Tùy theo quan hệ giữa biến cần điều khiển thể hiện quan hệ giữa biến vào và biến ra
trong một hệ thống điều khiển. Các sách lược điều khiển phổ biến trong thực tế là:

Sách lược điều khiển phản hồi (Feedback control, FB)

Sách lược điều khiển truyền thẳng (Feedforward control, FF)

Sách lược điều khiển kết hợp (FF/FB)

Sách lược điều khiển tỷ lệ (Ratio control, RC)

Sách lược điều khiển tầng (Cascade control, CC).

SÁCH LƯỢC ĐIỀU KHIỂN PHẢN HỒI:
Sách lược điều khiển phản hồi dựa trên nguyên tắc liên tục đo giá trị biến được điều
khiển và phản hồi thông tin về bộ điều khiển, bộ điều khiển so sánh nó với giá trị đặt,
tính toán lại giá trị của biến điều khiển cần tác động vào quá trình nhằm đạt được giá trị
đặt mong muốn của biến được điều khiển.
Sơ đồ khối thể hiện sách lược điều khiển phản hồi:

Điều khiển phản hồi là một sách lược điều khiển đóng vai trò nền tảng và được áp dụng
phổ biến trong điều khiển quá trình. Bản chất của sách lược điều khiển phản hồi là
phương thức điều khiển theo thông tin phản hồi từ biến được điều khiển, hay còn gọi là
điều khiển theo sai lệch: sai lệch giữa giá trị biến được điều khiển so với giá trị cài đặt.
Đặc điểm của điều khiển phản hồi:
Điều khiển phản hồi có nhược điểm là đưa ra tác động chậm, bởi vì khi phát hiện ra sai
lệch mới bắt đầu quá trình khắc phục sai lệch đó. Nhất là đối với quá trình có động học
chậm, ảnh hưởng khi có tác động của nhiễu tới đầu ra của quá trình phải mất một khoảng
thời gian dài, dẫn đến quá trình phát hiện sai lệch và hiệu chỉnh lại sai lệch chậm hơn.
Mặc dù còn có một số nhược điểm như nêu trên, nhưng ưu điểm của điều khiển phản hồi
vẫn là nổi trội. Do đó, trong số các sách lược điều khiển độc lập thì sách lược điều khiển
phản hồi vẫn đóng vai trò quan trọng nhất, được sử dụng ở hầu hết các hệ thống điều
khiển tự động. Các ưu điểm chính có thể kể đến là: điều khiển phản hồi cho chất lượng
điều khiển có độ chính xác cao. Điều này được giải thích là do tác động điều khiển U
được hình thành dựa trên độ sai lệch điều khiển, nên chừng nào còn sai lệch thì bộ điều
khiển còn đưa ra tác động đến biến điều khiển làm cho sai lệch nhỏ đi, tạo ra đáp ứng
chính xác. Một ưu điểm khác của điều khiển phản hồi đó là khả năng triệt tiêu ảnh hưởng
của nhiễu không biết trước hay không đo được.

SÁCH LƯỢC ĐIỀU KHIỂN TRUYỀN THẲNG:
Sách lược điều khiển truyền thẳng là sách lược mà ở đó bộ điều khiển tiếp nhận tín hiệu
của những nhiễu đo được, truyền về bộ điều khiển nhằm ngăn chặn kịp thời sự tác động,
ảnh hưởng của biến nhiễu đối với quá trình, qua đó có thể đạt được mục đích của quá
trình. Bản chất sách lược điều khiển truyền thẳng là phương thức điều khiển theo thông
tin biến nhiễu, nên còn được gọi là sách lược điều khiển bù nhiễu. Sơ đồ khối tổng quát
sách lược điều khiển bù nhiễu như sau:

Trong sách lược điều khiển phản hồi, thông tin phản hồi được sử dụng là tín hiệu đo
được của biến cần điều khiển, còn trong sách lược điều khiển truyền thẳng sử dụng thông
tin là tín hiệu đo được của biến nhiễu.
Đặc điểm của điều khiển truyền thẳng:
Điều khiển truyền thẳng được áp dụng rộng rãi trong điều khiển quá trình với những ưu
điểm quan trọng là tác động nhanh do khả năng loại bỏ ảnh hưởng của nhiễu trước khi
nó kịp ảnh hưởng xấu tới quá trình. Song điều khiển truyền thẳng cũng có những nhược
điểm là: chất lượng điều khiển có độ chính xác không cao. Điều này có thể hiểu được do
khi điều khiển truyền thẳng cần phải biết rõ thông tin về quá trình và ảnh hưởng của
nhiễu, tuy nhiên không phải nhiễu nào cũng đo được do vậy nó không triệt tiêu được
nhiễu không đo được hay không biết trước nên sai lệch điều khiển bao giờ cũng tồn tại.
ĐIỀU KHIỂN KẾT HỢP PHẢN HỒI VÀ TRUYỀN THẲNG:
Từng sách lược điều khiển cơ bản nêu trên, nếu áp dụng độc lập đều có những nhược
điểm nhất định: điều khiển phản hồi có ưu điểm chính xác và triệt tiêu được ảnh hưởng
của nhiễu, nhưng lại chậm; điều khiển truyền thẳng thì không cho độ chính xác cao
nhưng lại phản ứng nhanh với ảnh hưởng của nhiễu. Vì vậy, trong thực tế thường ít khi
chỉ áp dụng điều khiển phản hồi thuần tuý hoặc điều khiển truyền thẳng thuần tuý mà

thường kết hợp các sách lược điều khiển nêu trên trong cùng một Hệ thống điều khiển
tự động đối với các Quá trình và Thiết bị công nghệ.
Cấu trúc sách lược kết hợp truyền thẳng với điều khiển phản hồi thể hiện trên Sơ đồ khối
tổng quát như sau:

SÁCH LƯỢC ĐIỀU KHIỂN TỶ LỆ:
Điều khiển tỷ lệ (Ratio Control, RC) là một dạng đặc biệt của điều khiển truyền thẳng,
trong đó bộ điều khiển tiếp nhận tín hiệu của các biến vào, duy trì tỉ lệ giữa các biến đó
theo một giá trị thích hợp nhằm điều khiển quá trình hoạt động theo yêu cầu mong muốn.
Cơ sở để áp dụng Sách lược điều khiển kiểu tỷ lệ:
Ở các quá trình công nghệ thực tế, có khá nhiều quá trình mà ở đầu vào có sự tham gia
của 2 dòng vật chất: một dòng có thể kiểm soát được (can thiệp được), còn một dòng
không kiểm soát được (nhiễu đo được). Kết quả hay sản phẩm của các quá trình như vậy
chịu sự tác động, ảnh hưởng trực tiếp bởi tỷ lệ giữa hai lượng vật chất đó. Có thể nêu ra
khá nhiều ví dụ minh chứng cho điều đó để làm cơ sở cho việc áp dụng sách lược điều
khiển tỷ lệ.
ĐIỀU KHIỂN PHẢN HỒI KẾT HƠP TỶ LỆ:
Bản chất sách lược điều khiển tỷ lệ là điều khiển truyền thẳng, không có biến cần điều
khiển nào được đo và được so sánh với giá trị đặt, do đó điều khiển tỷ lệ cho chất lượng
điều khiển không cao. Trong hai cấu hình điều khiển tỷ lệ ở trên, chỉ cần một yếu tố như
nhiệt độ ban đầu của 2 dòng thay đổi thì nhiệt độ đầu ra T2 sẽ không đạt được giá trị
mong muốn Tsp.

Thực tế có thể kết hợp điều khiển tỷ lệ với phản hồi, giải pháp được đưa ra là giá trị đặt
tỷ lệ Rsp của vòng điều khiển tỷ lệ sẽ được tính toán và cài đặt từ bộ điều khiển phản hồi.
Khi đó tỷ lệ lưu lượng giữa hai dòng có ảnh hưởng lớn đến nhiệt độ đầu ra T2 sẽ được
vòng điều khiển tỷ lệ FFC kiểm soát, vòng điều khiển phản hồi có nhiệm vụ chỉnh lại tỷ
lệ đặt khi có yếu tố nhiễu tác động làm cho nhiệt độ T2 không đạt giá trị đặt mong muốn.
Sách lược điều khiển này cũng là một dạng của điều khiển tầng.
SÁCH LƯỢC ĐIỀU KHIỂN TẦNG:
Điều khiển tầng (cascade control) là sách lược điều khiển sử dụng cấu trúc nhiều bộ
điều khiển lồng nhau, trong đó tín hiệu điều khiển của vòng ngoài sẽ dùng để làm giá trị
đặt cho bộ điều khiển vòng trong. Ví dụ sơ đồ khối điều khiển quá trình gia nhiệt:

Khi hệ thống hoạt động ở trạng thái ổn định, tín hiệu ra từ bộ điều khiển vòng ngoài
không đổi, đồng nghĩa với giá trị lưu lượng đặt cho bộ điều khiển vòng trong không đổi,
lúc này bộ điều khiển lưu lượng FIC-101 có trách nhiệm duy trì lưu lượng hơi nước cố
định theo giá trị đặt, cho nên nhiễu nhất thời tại van điều khiển hầu như không ảnh hưởng
tới nhiệt độ dầu ra. Khi có nhiễu khác (T1, Gp..) tác động làm cho nhiệt độ đầu ra lệch

khỏi giá trị đặt, bộ điều khiển nhiệt độ (vòng ngoài) sẽ thực hiện vòng điều khiển mới để
tạo một giá trị đặt mới cho bộ điều khiển lưu lượng.
Điều khiển tầng được ứng dụng khi điều khiển vòng đơn đáp ứng chậm, không cho chất
lượng điều khiển mong muốn. Điều khiển tầng là một cấu trúc điều khiển nhiều vòng
đơn lồng nhau, trong đó vòng điều khiển tầng trên (vòng ngoài) bao giờ cũng là vòng
điều khiển phản hồi, được kết hợp với vòng điều khiển tầng dưới (vòng trong), vòng
trong có thể là vòng điều khiển phản hồi hoặc tỷ lệ, giá trị đặt của vòng trong được tính
toán và điều chỉnh thường xuyên bởi vòng điều khiển vòng ngoài.

Tài liệu tham khảo | 10

4. THIẾT BỊ THÍ NGHIỆM
4.1. Hệ thống điều khiển mức chất lỏng

4.2. Giao diện điều khiển

Hình 2. Giao diện điều khiển hệ thống bình chứa chất lỏng

1 Đồ thị đáp ứng
2 Chiều cao mức chất lỏng cột trái
3 Chiều cao mức chất lỏng cột phải
4 Vùng hiển thị kết quả các thông số đã nhập
5 Vùng hiển thị các thông số bộ điều khiển tính toán được
6 Vùng nhập các giá trị cài đặt và thông số bộ điều khiển PID
7 Vùng nhập phương thức điều khiển
8 Vùng điều khiển bật, tắt bơm và bộ điều khiển
9 Lưu lượng dòng ra

5. PHƯƠNG PHÁP THÍ NGHIỆM
4.1 Chuẩn bị
Sử dụng hệ thống bình chứa chất lỏng đã được lắp đặt sẵn hệ thống điều khiển và cài đặt
sẵn thuật toán cho bộ điều khiển.
Bật cầu dao nguồn trên bảng điều khiển, bặt máy tính kết nối với hệ thống, khởi động
dao diện giám sát và điều khiển.
Kiểm tra nước ở bình chứa.
4.2 Tiến hành thí nghiệm
Thí nghiệm 1: Khảo sát phương thức điều khiển phản hồi
Thực hiện thí nghiệm trên bình chứa lỏng ở phía bên phải, đóng tất cả các van liên quan
đến bình chứa ở phía bên trái.
Mở nhẹ van số 4 theo yêu cầu của từng nhóm làm thí nghiệm
Trên màn hình giám sát, chọn ở ô số 7 phương thức điều khiển phản hồi
Cài đặt mức chất lỏng cần điều khiển ở ô số 6
Nhấn vào nút Control ở ô số 8, hệ thống sẽ điều khiển mức chất lỏng
Quan sát đồ thị điều khiển, chụp hình lại màn hình điều khiển khi hệ ổn định
Khi hệ thống ổn định, tăng hoặc giảm độ mở van số 4, quan sát hệ thống đến khi hệ ổn
định trở lại. Chụp lại màn hình kết quả.
Lưu các kết quả vào file.
Thí nghiệm 2: Khảo sát phương thức điều khiển truyền thẳng
Làm tương tự thí nghiệm 1, nhưng chọn phương thức điều khiển truyền thẳng ở ô số 7.
Thí nghiệm 3: Khảo sát phương thức điều khiển kết hợp
Làm tương tự thí nghiệm 1, nhưng chọn phương thức điều khiển ở ô số 7.
4.3 Kết thúc thí nghiệm
Trình tự thao tác khi kết thúc thí nghiệm:
1) Mở 4 xả hết nước trong cột chất lỏng.
2) Tắt bơm và chức năng Control ở ô số 8

3) Tắt phần mềm giao diện điều khiển, tắt máy tính
4) Ngắt nguồn điện vào hệ thống.
5) Vệ sinh sạch sẽ tại vị trí của bài thí nghiệm, sắp xếp dụng cụ thí nghiệm ngăn nắp,
trả về hiện trạng ban đầu.
Lưu ý : trong quá trình làm thí nghiệm nếu có sự cố nào về hệ thống thiết bị thí nghiệm
thì có thể báo ngay cho cán bộ trực Phòng thí nghiệm để xử lý.

6. CÂU HỎI
1. Các “Biến quá trình” là gì? Hãy biểu diễn Sơ đồ khối tổng quát về các biến quá
trình? Nêu những nét đặc trưng nhất của từng loại biến quá trình?
2. Sách lược điều khiển là gì? Hãy kể tên các Sách lược điều khiển cơ sở được áp dụng
trong Điều khiển quá trình?
3. Vẽ sơ đồ khối tổng quát về các biến quá trình, Sơ đồ khối và lưu đồ điều khiển cho
từng sách lược điều khiển trong bài thí nghiệm này?
4. Mô tả các thành phần của hệ thống điều khiển trong bài thí nghiệm này?

BÀI THÍ NGHIỆM 2
THIẾT BỊ ĐIỀU KHIỂN VÀ LẬP TRÌNH VI ĐIỀU KHIỂN

1. MỤC ĐÍCH
- Hiểu được chức năng bộ vi điều khiển
- Biết lập trình các thuật toán điều khiển cho bộ điều khiển
- Thiết lập sơ đồ kết nối các thành phần của hệ thống điều khiển
- Thiết kế hệ thống điều khiển tự động để khởi động, dừng cho quá trình chưng cất
2. NỘI DUNG THÍ NGHIỆM
Nội dung chính của bài thí nghiệm là tìm hiểu cấu trúc của bộ điều khiển Arduino,
lập trình thu thập và xủa lý tín hiệu từ các cảm biến, lập trình thuật toán điều khiển
cho bộ điều khiển để thực hiện các chức năng cơ bản của một hệ thống điều khiển
quá trình.
3. THIẾT BỊ THÍ NGHIỆM
Hệ thống điều khiển bao gồm nhiều chức năng khác nhau như chức năng điều
chỉnh, điều khiển trình tự, điều khiển rời rạc, điều khiển vận hành giám sát…Trong
công nghiệp hoá chất, dầu khí ngày nay thường sử dụng các bộ điều khiển số dựa
trên nền tảng vi xử lý hay máy tính số có khả năng thực hiện các thuật toán điều
khiển bằng máy tính số.
Trong bài thí nghiệm này, chúng ta sử dụng bộ điều khiển Arduino, là một bo mạch
sử dụng vi điều khiển đã được chuẩn hóa, được sử dụng rất phổ biến và được hỗ
trợ bởi một cộng đồng người sử dụng rộng rãi ở Việt Nam cũng như trên thế giới.
Hỗ trợ cho việc lập trình là phần mềm Arduino IDE kết hợp với phần mềm mô
phỏng trực tuyến www.tinkercad.com
Bo mạch Arduino
Mạch Arduino của hãng Arduino có nhiều phiên bản khác nhau như Mega, Uno,
Micro, Nano…Cấu tạo chung của các mạch này đều tương tự nhau. Ví dụ Hình…
giới thiệu mạch Nano trên trang web của Arduino. Nhìn chung chúng bao gồm các
khối cơ bản:
- Khối nguồn POWER sử dụng nguồn cấp từ bên ngoài 5-9V

-

Khối chức năng nhận tín hiệu (INPUT) và xuất tín hiệu (OUTPUT) thông qua các
chân tín hiệu (PIN)
Khối chức năng truyền dữ liệu thông qua giao tiếp Serial.

Các chân (PIN) có khả năng xuất và nhận tín hiệu, các chân D dùng để xuất hoặc
nhận tín hiệu Digital là các giá trị điện thế từ 0V đến 5V tương ứng với giá trị LOW
và HIGH, còn các chân A dùng để nhận tín hiệu Analog là các giá trị điện thế từ 0V
đến 5V. Ngoài ra một số chân như ~D3, ~D5, ~D6,… có thể tạo tín hiệu xung.

Arduino IDE
Intergrated Development Environment (IDE) là môi trường được sử dụng để lập trình
cho các bo mạch Arduino. IDE được tải miễn phí từ www.arduino.cc và cài đặt trên máy
tính.
Giao diện IDE thể hiện trên hình và bao gồm các vùng các nút lệnh (1), vùng viết chương
trình (2) và vùng thông báo trạng thái (3)

Một chương trình cơ bản bao gồm hai phần chính đó là cài đặt (setup()) và vòng lặp
(loop()).
setup() là nơi để khai báo các giá trị biến, khai báo thư viện, thiết đặt thông số... Phần
này sẽ chạy một lần duy nhất sau khi cấp nguồn cho arduino, không có tính lặp lại.
loop() sẽ khởi động sau khi khi setup() chạy xong, đây là nơi các chương trình được
chạy lặp đi lặp lại cho đến khi bạn thôi cấp nguồn cho arduino. Khi đó công việc điều
khiển tự động được duy trì và số liệu sẽ được cập nhật liên tục.
Một số lệch cơ bản:
pinMode() là câu lệnh dùng để thiết lập một chân tín hiệu nào đó là OUTPUT hay
INPUT. Ví dụ pinMode(13, OUTPUT) thiết lập cho chân 13 có chức năng OUTPUT
digitalWrite() là câu lệnh dùng để xuất tín hiệu điện từ một chân digital (được thiết đặt
là OUTPUT). Ví dụ digtalWrite (pin, signal) với pin là giá trị chân digital muốn xuất tín
hiệu, signal là HIGH (1, true) hoặc LOW (0, false) tương ứng 5V và 0V.
digitalRead() là câu lệnh dùng để đọc tín hiệu điện mà một chân digital nhận được (được
thiết đặt là INPUT). Ví dụ digtalRead (pin) với pin là chân digital nhận tín hiệu, giá trị
trả về là HIGH hoặc LOW.
analogRead() là đọc giá trị điện áp từ một chân Analog (ADC). Trên mạch Arduino
NANO có 8 chân Analog In, được kí hiệu từ A0 đến A7. Câu lệnh analogRead() luôn

trả về 1 số nguyên nằm trong khoảng từ 0 đến 1023 tương ứng với thang điện áp từ 0V
đến 5V.
analogWrite() là lệnh xuất ra một chân trên mạch Arduino một mức tín hiệu analog
(phát xung PWM). Giá trị phát ra là 1 số nằm trong khoảng từ 0 đến 255 tương ứng với
thang điện áp trung bình từ 0V đến 5V. Các chân phát xung trên UNO là chân có ký hiệu
dấu “~”. Ví dụ analogWrite(D3, [giá trị xung PWM]).
Xung PWM (Pulse Width Modulation) là các trạng thái cao/thấp (HIGH/LOW) về mức
điện áp được lặp đi lặp lại.
if ( phép so sánh) { Các lệnh thực thi khi điều kiện đúng;}
else {Các lệnh thực thi khi điều kiện sai}
phép so sánh: “==” khác với “=”, <=, >=, “!=”
for: lặp với số lần định trước.
cấu trúc for (giá trị đầu; điều kiện cuối; bước nhảy) { các lệnh thực thi;}
while: lặp với số lần không định trước.
cấu trúc while (điều kiện) { các lệnh thực thi;}

4. THỰC HIỆN THÍ NGHIỆM.
Thí nghiệm 1: Thực hiện mô phỏng điều khiển động cơ khuấy.
Bài toán lập trình điều khiển yêu cầu: Thông qua 1 công tắc điều khiển khi nhấn nút bật
(ON) máy khuấy thì hoạt động theo chu trình ON: cánh khuấy quay trong vòng 60 giây,
sau đó dừng lại 30 giây rồi lại quay trong 90 giây trước khi kết thúc quá trình khuấy
(chuyển qua chu trình tắt OFF).

Thiết kế chương trình
Lắp động cơ khuấy vào chân D13, công tắc vào chân D2 sử dụng điện trở kéo về GND.
sử dụng pinMode OUTPUT để thiết lập chân số 13 là chân nhận tín hiệu đầu ra.
Tín hiệu chân ra digital có 2 giá trị HIGH hoặc LOW sử dụng lệnh digitalWrite().
Lệnh delay() để giữ nguyên trạng thái hoạt động trong khoảng thời gian mong muốn.
Việc đọc tín hiệu phải để trong vòng void loop để chương trình liên tục quét nhằm phát
hiện khi nào người dùng bật công tắc. Do chu trình ON chỉ chạy 1 lần nên có sử dụng
biến i để xác định xen chu trình ON đã thực hiện hay chưa.
Ngoài ra từ đoạn code này có thể phát triển lên cho quá trình khuấy hoạt động theo 3 chu
chình ON liên tục như trên, mỗi chu trình cách nhau 30 giây.

Thí nghiệm 2: Thực hiện mô phỏng điều khiển động cơ khuấy
Bài toán lập trình điều khiển yêu cầu: bật động cơ khuấy ở mức công suất 50% trong
vòng 60 giây, tăng dần công suất lên 100% theo 5 cấp độ - mỗi cấp độ hoạt động 30 giây,
sau đó giảm đều công suất về 0% theo 5 cấp độ cách nhau 30 giây rồi dừng hẳn.
Thiết kế chương trình
Lắp động cơ khuấy từ chân D13 sang chân ~D11 là chân PWM, sử dụng pinMode
OUTPUT để thiết lập chân số 6 là chân nhận tín hiệu đầu ra. Tín hiệu chân ra analog
(PWM) thiết lập bằng 125 (khoảng 50%) trong 60 giây. Tăng giá trị chân PWM từ 125
lên 250 và giảm xuống 0 theo bước nhảy như đề bài.
Đoạn code tham khảo của chương trình:

Tài liệu tham khảo | 21

Thí nghiệm 3: Mô phỏng điều khiển vận hành hệ thống chưng cất
Hệ thống chưng cất trong bài thí nghiệm này được thể hiện trên hình:

Điều khiển quá hệ thống chưng cất bao gồm tự động chu trình khởi động (ON). Tiếp
theo sau đó là giai đoạn duy trì trạng thái làm việc ổn định – gọi là chu trình ổn định (SS)
– được thực hiện bởi các hệ thống điều chỉnh tự động. Cuối cùng là chu trình tự động
dừng (OFF) hệ thống thiết bị chưng cất.
Bài toán điều khiển cụ thể như sau:
Sử dụng công tắc ON/OFF viết chương trình điều khiển tự động 3 chu trình cho hệ thống
chưng cất: chu trình khởi động(ON), chi trình làm việc(SS) và chu trình dừng kết thúc
quá trình (OFF):
-

Bật nút ON hệ thống khởi động theo quy trình định sẵn, sau đó hệ chuyển sang
trạng thái làm việc, giữ trạng thái đến khi dừng hệ thống.
Bật nút OFF hệ thống chuyển trạng thái dừng theo quy trình định sẵn.

(1) Chu trình khởi động ON
Các bước thực hiện

Sự kiện
Thời gian
chờ (giây)

B1 – Khởi động

Nhấn nút ON
--

B2 – Nhập dung dịch vào nồi đun
B3 – Gia nhiệt nồi đun và cấp nước giải
nhiệt cho thiết bị ngưng tụ
B4 – khởi động dòng nhập liệu
B5 – Khởi động dòng hoàn lưu

B6 – Tháo sản phẩm đáy

Bật Bơm 1
Mở van V0
Tắt V0
Bật điện trở R0
Mở van V4
Mở van V1
Bật điện trở R1
Mở van V2
Bật Bơm 2
Bật điện trở R1
Mở V3
Bật Bơm 3

30

60
10

10
--

(2) Trạng thái làm việc (SS):
Tất cả các thiết bị ở trạng thái làm việc (ON), riêng van V0 đóng.
(3) Chu trình dừng (OFF):
Các bước thực hiện

Sự kiện
Thời gian
chờ (giây)
Nhấn nút OFF
--

B1 – Dừng
B2 – Tắt tất cả nguồn nhiệt cấp cho tháp
B3 – Ngưng dòng nhập liệu và hồi lưu

Tắt điện trở R0, R1
và R2
Tắt các bơm 1, 2, 3
Đóng các van 1, 2, 3

60
60
--

B4 – Ngưng dòng nước lạnh

Đóng van V4

Lưu ý: sinh viên tìm hiểu sơ đồ lắp thiết bị trên tủ điều khiển để lập trình theo nội dung
trên. Sau khi lập trình, chạy mô phỏng và nạp chương trình vào bộ điều khiển trong
bảng điều khiển để kiểm tra kết quả thực tế. Viết báo cáo cho thí nghiệm này.
Thí nghiệm 4: Lập trình điều chỉnh tự động nhiệt độ nhập liệu vào tháp chưng cất
sử dụng bộ điều khiển ON-OFF.
Sử dụng cảm biến nhiệt độ TMP, giá trị nhiệt độ được cảm biến chuyển thành tín hiệu
điện áp tương ứng. Cứ 10mV tương ứng với 1oC, khoảng đo của cảm biến từ -40 oC
đến 125 oC.
Cảm biến được gắn vào chân analog A0 của Arduino có giá trị từ 0-1023 tương ứng
với điện áp từ 0-5000mV.
Như vậy giá trị đọc được từ chân A0 (gọi là sensor) được chuyển về dạng điện áp theo
công thức: voltage = sensor*5000/1024. Sau đó giá trị này được chuyển về đơn vị nhiệt
độ với độ bù sai sệch điện áp (trong trường hợp này lấy 400mV), ta có nhiệt độ mà cảm
biến đo được là : T = (voltage-400)/10

Thí nghiệm 5: Lập trình điều chỉnh tự động mức chất lỏng đáy tháp chưng cất sử
dụng bộ điều khiển PID.
Sử dụng cảm biến siêu âm HC-SR04 đo mức chất lỏng:
Sử dụng sóng siêu âm phát từ chân Trig (sử dụng lệnh digitalWrite(trig,HIGH); ) và
nhận tín hiệu sóng phản xạ tại chân Echo. Đo thời gian từ lúc phát sóng đến lúc nhận
sóng phản xạ ta ính được khoảng cách từ cảm biến đến bề mặt vật thể.
Thời gian được arduino đo bằng lệnh: time = pulseIn(echo, HIGH);
Vận tốc âm thanh ở 30 ℃ : 349 m/s =
Khoảng cách đến vật thể: distance 

349.100
 0, 0349 cm/μs .
106

time
.0, 0349 cm .
2

BÀI THÍ NGHIỆM 3
KHẢO SÁT CÁC BỘ ĐIỀU KHIỂN ON-OFF VÀ PID

1. MỤC ĐÍCH THÍ NGHIỆM
Dựa trên các Hệ thống điều khiển các đại lượng cơ bản trong phòng thí nghiệm:
- Tìm hiểu quy luật điều khiển ON-OFF và PID
- Đánh giá chất lượng điều khiển khi sử dụng bộ điều khiển ON-OFF.
- Đánh giá chất lượng điều khiển khi sử dụng bộ điều khiển P, PI, PID.
2. NỘI DUNG
Tìm hiểu cấu trúc của hệ thống thiết bị điều khiển các đại lượng cơ bản trong phòng thí
nghiệm. Tìm hiểu nguyên lý hoạt động các thành phần trong hệ thống điều khiển như
cảm biến đo các đại lượng công nghệ, thiết bị chấp hành chấp hành, phần cứng bộ điều
khiển… và sơ đồ kết nối giữa các thành phần này với nhau. Thực hiện cài đặt giao diện
điều khiển và khảo sát đáp ứng của hệ với các bộ điều khiển khác nhau: trong các trường
hợp đáp ứng giá trị đặt và đáp ứng nhiễu.
3. CƠ SỞ LÝ THUYẾT
Tóm tắt phần 6.1.1 và 6.1.2 vào đây
4. THIẾT BỊ THÍ NGHIỆM
Với bài thí nghiệm này, sinh viên thực hiện thí nghiệm tối thiểu trên 02 trong các hệ
thống thiết bị điều khiển các đại lượng công nghệ cơ bản trong phòng thí nghiệm.
Cấu tạo mỗi hệ thống điều chỉnh bao gồm quá trình kỹ thuật và máy tính cài đặt phần
mềm điều khiển và giao diện giám sát Halalab. Giao diện giám sát điều khiển bao gồm
các phần sau:
① Đồ thị hiển thị giá trị đại lượng cần điều khiển theo thời gian thực.
② và ③ Đồ thị hiển thị các thông số trạng thái hệ thống
④ Giá trị cài đặt của đại lượng cần điều khiển
⑤ Khảo sát các bộ điều khiển tự động
⑥ Lựa chọn bộ điều khiển ON-OFF hoặc PID để khảo sát

④
⑤

①
⑥

⑦
②

③
⑧

Hình…Điều chỉnh nồng độ

④
①

⑤

⑥

⑦

②

③
⑧

Hình…Điều chỉnh lưu lượng

④
①

⑤
⑥
⑦

②

③
⑧

Hình…Điều chỉnh mức chất lỏng

④
①

②

⑤

③

⑥
⑦
⑧

Hình…Điều chỉnh áp suất

④
①
⑤

②

③

⑥

⑦
⑧

Hình…Điều chỉnh nhiệt độ

5. PHƯƠNG PHÁP THÍ NGHIỆM
Thí nghiệm 1: Khảo sát bộ điều khiển ON/OFF
-

Nhập giá trị biến cần điều khiển mong muốn ysp
Chọn bộ điều khiển ON/OFF trên dao diện điều khiển
Thực hiện khảo sát bằng cách nhấn vào nút Auto trên giao diện điều khiển
Ghi nhận chỉ tiêu chất lượng vào bảng
Khi hệ thống ổn định, đưa nhiễu bậc thang vào hệ thống, ghi nhận đáp ứng vào
bảng ghi kết quả
Bộ điều khiển ON-OFF
ysp:
Nhiễu:

Thời gian xác lập, s
Sai lệch xác lập
Độ quá điều chỉnh

Thí nghiệm 2: Khảo sát các bộ điều khiển P, PI và PID
-

Nhập giá trị biến cần điều khiển mong muốn ysp
Chọn lần lượt bộ điều khiển P, PI và PID trên giao diện điều khiển

-

Thực hiện khảo sát bằng cách nhấn vào nút Auto trên giao diện điều khiển
Ghi nhận chỉ tiêu chất lượng vào bảng ghi kết quả
Khi hệ thống ổn định, đưa nhiễu bậc thang vào hệ thống, ghi nhận đáp ứng vào
bảng ghi kết quả.
Bộ điều khiển P
ysp:
Nhiễu:

Thời gian xác lập, s
Sai lệch xác lập
Độ quá điều chỉnh
Bộ điều khiển PI

ysp:

Nhiễu:

ysp:

Nhiễu:

Thời gian xác lập, s
Sai lệch xác lập
Độ quá điều chỉnh
Bộ điều khiển PID
Thời gian xác lập, s
Sai lệch xác lập
Độ quá điều chỉnh
6. CÂU HỎI KIỂM TRA
1. Tìm hiểu và so sánh nguyên lý hoạt động của bộ điều khiển ON/OFF với điều
khiển tuyến tính PID?
2. Nhận xét về ảnh hưởng các thành phần P, I, D đến chất lượng điều khiển?
3. Vẽ sơ đồ khối tổng quát về các biến quá trình, sơ đồ khối và lưu đồ điều khiển?
4. Mô tả các thành phần của hệ thống điều khiển trong các bài thí nghiệm này?

BÀI THÍ NGHIỆM 4
THIẾT KẾ HỆ THỐNG ĐIỀU CHỈNH CÁC ĐẠI LƯỢNG CƠ BẢN

1. MỤC ĐÍCH:
Dựa trên các hệ thống thiết bị điều khiển đại lượng cơ bản trong phòng thí nghiệm:
-

Khảo sát ảnh hưởng các thông số kP , kI , kD của bộ điều khiển PID đến chất lượng
điều khiển.
Xác định quy luật điều khiển và chỉnh định các thông số kP , kI , kD cho phù hợp.

2. NỘI DUNG
Tìm hiểu cấu trúc của hệ thống thiết bị điều khiển các đại lượng cơ bản trong phòng thí
nghiệm. Tìm hiểu nguyên lý hoạt động các thành phần trong hệ thống điều khiển như
cảm biến đo các đại lượng công nghệ, thiết bị chấp hành chấp hành, phần cứng bộ điều
khiển… và sơ đồ kết nối giữa các thành phần này với nhau. Thực hiện cài đặt giao diện
điều khiển và khảo sát ảnh hưởng các thông số bộ điều khiển đến đáp ứng của hệ. Thiết
kế bộ điều khiển cho một hệ thống điều chỉnh.
3. CƠ SỞ LÝ THUYẾT
3.1. Ảnh hưởng các thông số bộ điều khiển
Tóm tắt 1 phần 6.1.2 (bảng tăng giảm kp ki kd) vào đây
3.2. Thiết kế bộ điều khiển
Tóm tắt phần phương pháp Ziegler Nichols 1 vào đây
4. THIẾT BỊ THÍ NGHIỆM
Với bài thí nghiệm này, sinh viên thực hiện thí nghiệm tối thiểu trên 01 trong số 05 hệ
thống thiết bị điều khiển các đại lượng công nghệ cơ bản trong phòng thí nghiệm. Sinh
viên chọn hệ thống điều khiển khác với hệ thống đã thực hiện ở Bài thí nghiệm 3.
Trên giao diện điều khiển để thực hiện.Sinh viên sự dụng chức năng:
① Đồ thị hiển thị giá trị đại lượng cần điều khiển theo thời gian thực.
② và ③ Đồ thị hiển thị các thông số trạng thái hệ thống
④ Giá trị cài đặt của đại lượng cần điều khiển
⑦ Khảo sát các thông số bộ điều khiển PID

⑧ Nhập các thông số bộ điều khiển PID

④
①

⑤
⑥

⑦
②

③
⑧

4. PHƯƠNG PHÁP THÍ NGHIỆM
- Nhập giá trị biến cần điều khiển mong muốn ysp
- Chọn chế độ Tune trên giao diện điều khiển tại ô số ⑦
- Thay đổi các giá trị của các thông số của bộ điều khiển tại ô số ⑧ để khảo sát.
- Ghi nhận chỉ tiêu chất lượng vào bảng kết quả
Thí nghiệm 1: Khảo sát sự ảnh hưởng các thông số bọ điều khiển PID
a) Khảo sát ảnh hưởng của tham số kP
kp
1

2

5

20

1

1.5

2

Thời gian xác lập, s
Sai lệch xác lập
Độ quá điều chỉnh
b) Khảo sát ảnh hưởng của tham số kI
ki
0.5
Thời gian xác lập, s
Sai lệch xác lập
Độ quá điều chỉnh

c) Khảo sát ảnh hưởng của tham số kD
kD
0.5

1

2

5

Thời gian xác lập, s
Sai lệch xác lập
Độ quá điều chỉnh
d) Chọn bộ thông số phù hợp, kiểm tra lại chất lượng điều khiển khi hệ thống ổn định,
đưa nhiễu bậc thang vào hệ thống.
Nhiễu bậc thang, kp=
, ki=
, kD=
Thời gian xác lập, s
Sai lệch xác lập
Độ quá điều chỉnh
Thí nghiệm 2: Thiết kế bộ điều khiển PID theo Ziegler- Nichols 1 (NZ1)
Xác định đáp ứng quá độ của hệ hở
Xác định các thông số bộ điều khiển theo ZN1
Cài đặt và đánh giá chất lượng điều khiển
Nhiễu bậc thang, kp=

, ki=

, kD=

Thời gian xác lập, s
Sai lệch xác lập
Độ quá điều chỉnh

5. CÂU HỎI KIỂM TRA
1. Vẽ sơ đồ khối tổng quát về các biến quá trình, sơ đồ khối và lưu đồ điều khiển?
2. Mô tả các thành phần của hệ thống điều khiển trong bài thí nghiệm này?
3. Nhận xét ảnh hưởng các thông số bộ điều khiển đến chất lượng điều khiển

Tài liệu tham khảo | 34

Phụ lục 1: HƯỚNG DẪN VIẾT BÁO CÁO THÍ NGHIỆM
Mỗi sinh viên làm một file báo cáo thí nghiệm và nộp trên Bkel
Báo cáo bao gồm trang bìa, mục lục, danh mục hình ảnh và các nội dung như sau:
A. TRANG BÌA:

B. CÁC NỘI DUNG TRÌNH BÀY TRONG BÁO CÁO
1. TÓM TẮT
Phần tóm tắt nên viết ngắn gọn, rõ nghĩa. Được cấu trúc từ 8-10 câu văn (khoảng
100-200 từ). Cần làm rõ các nội dung sau:
- Mô tả vấn đề được thực hiện, mục tiêu thí nghiệm.
- Mô tả mô hình, đối tượng, phương pháp thí nghiệm.
- Trình bày những kết quả đã đạt được theo mục tiêu đề ra ban đầu. Nên sử dụng
sai số để so sánh thực nghiệm và lý thuyết.
- Kết luận và ý nghĩa của thí nghiệm.
Chú ý:
- Viết thẳng vào vấn đề, không dài dòng.
- Nên viết sau cùng khi nội dung báo cáo đã hoàn chỉnh
2. CƠ SỞ LÝ THUYẾT
Trình bày lại các kiến thức cơ sở liên quan đến nội dung, phương pháp thí nghiệm,
cũng như các lý thuyết và công thức sẽ được sử dụng để tính toán, giải thích các kết
quả của thí nghiệm. Trong đó cần lưu ý:
- Trình bày ngắn gọn, trích dẫn rõ ràng nguồn thông tin từ các tài liệu tham khảo
liên quan. Nên viết lại câu văn, không sao chép nguyên văn từ tài liệu tham
khảo.
- Điều chỉnh, biến đổi các công thức, đơn vị để thống nhất trong toàn bài báo cáo.
Khuyến khích sử dụng đơn vị theo hệ SI.
- Nên vẽ lại các hình ảnh liên quan.
3. MÔ TẢ THIẾT BỊ THÍ NGHIỆM
Trình bày ngắn gọn nguyên lý hoạt động kèm theo lưu đồ P&ID đơn giản của thiết
bị thí nghiệm. Cần làm rõ các vòng điều khiển và các thành phần trong hệ thống điều
khiển gồm:
- Bộ điều khiển
- Thiết bị đo
- Thiết bị chấp hành
- Các thành phần khác
Ngoài ra cũng nên cung cấp một số thông tin quan trọng về thiết bị như: nguồn
điện, công suất, kích thước cơ bản, …

4. QUY TRÌNH THỰC HIỆN
Nội dung phần này cần cung cấp các thông tin như sau:
- Các thao tác chuẩn bị, kiểm tra trước thí nghiệm và sau thí nghiệm.
- Các thao tác đã thực hiện trong quá trình thí nghiệm.
- Phương pháp đo và các yếu tố gây nhiễu đã được chú ý ghi nhận khi thí nghiệm.
- Các sự cố (nếu có) và cách khắc phục, xử lý các sự cố này.
Có thể sử dụng sơ đồ khối đề mô tả các bước thí nghiệm.
5. KẾT QUẢ VÀ BÀN LUẬN
Số liệu thu được từ thí nghiệm phải được trình bày có logic trong báo cáo. Cần lựa
chọn cách trình bày và xử lý số liệu cho phù hợp. Không đưa vào các số liệu rời rạc,
lan man không rõ nội dung. Một số gợi ý như sau:
- Số liệu chính xác, nên sử dụng bảng số liệu.
- Xu hướng biến đổi, nên sử dụng đồ thị.
- So sánh số liệu nên sử dụng tỷ lệ phần trăm.
- Xu hướng khác biệt cần nói rõ mức độ khác biệt.
- …
Sau khi xử lý số liệu, cần phân tích, đánh giá kết theo các mục tiêu ban đầu của thí
nghiệm. Nên giải thích rõ nội dung thông tin từ các bảng số liệu và đồ thị đã trình bày.
Thảo luận về các thí nghiệm và giải thích các kết quả thí nghiệm. Chứng minh về độ
lặp và độ chính xác nếu cần.
Chú ý so sánh giữa thực nghiệm và lý thuyết. Nếu phát sinh các kết quả sai lệch quá
lớn so với lý thuyết (>10%). Cần thảo luận rõ ràng về nguyên nhân và cách khắc phục
sai số nếu có.
Lưu ý: Cần quan tâm đến các kết quả sai hoàn toàn hoặc ngược với lý thuyết.
Đó có thể do thực hiện thí nghiệm sai những cũng có thể là một khám phá mới.
6. KẾT LUẬN VÀ KHUYẾN NGHỊ
Kết luận cần trình bày ngắn gọn các nội dung mà thí nghiệm đã đạt được:
- Mục tiêu thí nghiệm
- Phương pháp thí nghiệm
- Kết quả thí nghiệm
- Ý nghĩa của thí nghiệm

Từ kết quả này, có thể khuyến nghị các hướng nghiên cứu thí nghiệm để mở rộng
kiến thức hoặc khắc phục các nhược điểm còn tồn tại.
7. TRẢ LỜI CÁC CÂU HỎI TRONG PHẦN HƯỚNG DẪN
8. TÀI LIỆU THAM KHẢO
Khuyến khích dùng chuẩn IEEE (hoặc chuẩn APA) để trình bày tài liệu tham
khảo và trích dẫn. Các nội dung sau cần phải trích dẫn:
- Nguyên văn 1 câu hay 1 đoạn của tài liệu khác.
- Tóm ý, diễn lại ý của tác giả khác.
- Số liệu, kết quả của một nghiên cứu khác.
Lưu ý: Tài liệu được liệt kê phải liên quan và được trích dẫn trong bài báo. Không
liệt kê các tài liệu chỉ được đọc khi thực hiện báo cáo.

